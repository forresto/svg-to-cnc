var D={a:7,c:6,h:1,l:2,m:2,r:4,q:4,s:4,t:2,v:1,z:0},$=[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279];function G(t){return t===10||t===13||t===8232||t===8233||t===32||t===9||t===11||t===12||t===160||t>=5760&&$.indexOf(t)>=0}function J(t){switch(t|32){case 109:case 122:case 108:case 104:case 118:case 99:case 115:case 113:case 116:case 97:case 114:return!0}return!1}function K(t){return(t|32)===97}function q(t){return t>=48&&t<=57}function O(t){return t>=48&&t<=57||t===43||t===45||t===46}function Q(t){this.index=0,this.path=t,this.max=t.length,this.result=[],this.param=0,this.err="",this.segmentStart=0,this.data=[]}function X(t){for(;t.index<t.max&&G(t.path.charCodeAt(t.index));)t.index++}function Z(t){var n=t.path.charCodeAt(t.index);if(n===48){t.param=0,t.index++;return}if(n===49){t.param=1,t.index++;return}t.err="SvgPath: arc flag can be 0 or 1 only (at pos "+t.index+")"}function tt(t){var n=t.index,r=n,e=t.max,i=!1,s=!1,a=!1,o=!1,u;if(r>=e){t.err="SvgPath: missed param (at pos "+r+")";return}if(u=t.path.charCodeAt(r),(u===43||u===45)&&(r++,u=r<e?t.path.charCodeAt(r):0),!q(u)&&u!==46){t.err="SvgPath: param should start with 0..9 or `.` (at pos "+r+")";return}if(u!==46){if(i=u===48,r++,u=r<e?t.path.charCodeAt(r):0,i&&r<e&&(u&&q(u))){t.err="SvgPath: numbers started with `0` such as `09` are illegal (at pos "+n+")";return}for(;r<e&&q(t.path.charCodeAt(r));)r++,s=!0;u=r<e?t.path.charCodeAt(r):0}if(u===46){for(o=!0,r++;q(t.path.charCodeAt(r));)r++,a=!0;u=r<e?t.path.charCodeAt(r):0}if(u===101||u===69){if(o&&!s&&!a){t.err="SvgPath: invalid float exponent (at pos "+r+")";return}if(r++,u=r<e?t.path.charCodeAt(r):0,(u===43||u===45)&&r++,r<e&&q(t.path.charCodeAt(r)))for(;r<e&&q(t.path.charCodeAt(r));)r++;else{t.err="SvgPath: invalid float exponent (at pos "+r+")";return}}t.index=r,t.param=parseFloat(t.path.slice(n,r))+0}function B(t){var n,r;n=t.path[t.segmentStart],r=n.toLowerCase();var e=t.data;if(r==="m"&&e.length>2&&(t.result.push([n,e[0],e[1]]),e=e.slice(2),r="l",n=n==="m"?"l":"L"),r==="r")t.result.push([n].concat(e));else for(;e.length>=D[r]&&(t.result.push([n].concat(e.splice(0,D[r]))),!!D[r]););}function et(t){var n=t.max,r,e,i,s,a;if(t.segmentStart=t.index,r=t.path.charCodeAt(t.index),e=K(r),!J(r)){t.err="SvgPath: bad command "+t.path[t.index]+" (at pos "+t.index+")";return}if(s=D[t.path[t.index].toLowerCase()],t.index++,X(t),t.data=[],!s){B(t);return}for(i=!1;;){for(a=s;a>0;a--){if(e&&(a===3||a===4)?Z(t):tt(t),t.err.length)return;t.data.push(t.param),X(t),i=!1,t.index<n&&t.path.charCodeAt(t.index)===44&&(t.index++,X(t),i=!0)}if(!i){if(t.index>=t.max)break;if(!O(t.path.charCodeAt(t.index)))break}}B(t)}var rt=function(n){var r=new Q(n),e=r.max;for(X(r);r.index<e&&!r.err.length;)et(r);return r.err.length?r.result=[]:r.result.length&&("mM".indexOf(r.result[0][0])<0?(r.err="SvgPath: string should start with `M` or `m`",r.result=[]):r.result[0][0]="M"),{err:r.err,segments:r.result}};function nt(t,n){return[t[0]*n[0]+t[2]*n[1],t[1]*n[0]+t[3]*n[1],t[0]*n[2]+t[2]*n[3],t[1]*n[2]+t[3]*n[3],t[0]*n[4]+t[2]*n[5]+t[4],t[1]*n[4]+t[3]*n[5]+t[5]]}function k(){if(!(this instanceof k))return new k;this.queue=[],this.cache=null}k.prototype.matrix=function(t){return t[0]===1&&t[1]===0&&t[2]===0&&t[3]===1&&t[4]===0&&t[5]===0?this:(this.cache=null,this.queue.push(t),this)};k.prototype.translate=function(t,n){return(t!==0||n!==0)&&(this.cache=null,this.queue.push([1,0,0,1,t,n])),this};k.prototype.scale=function(t,n){return(t!==1||n!==1)&&(this.cache=null,this.queue.push([t,0,0,n,0,0])),this};k.prototype.rotate=function(t,n,r){var e,i,s;return t!==0&&(this.translate(n,r),e=t*Math.PI/180,i=Math.cos(e),s=Math.sin(e),this.queue.push([i,s,-s,i,0,0]),this.cache=null,this.translate(-n,-r)),this};k.prototype.skewX=function(t){return t!==0&&(this.cache=null,this.queue.push([1,0,Math.tan(t*Math.PI/180),1,0,0])),this};k.prototype.skewY=function(t){return t!==0&&(this.cache=null,this.queue.push([1,Math.tan(t*Math.PI/180),0,1,0,0])),this};k.prototype.toArray=function(){if(this.cache)return this.cache;if(!this.queue.length)return this.cache=[1,0,0,1,0,0],this.cache;if(this.cache=this.queue[0],this.queue.length===1)return this.cache;for(var t=1;t<this.queue.length;t++)this.cache=nt(this.cache,this.queue[t]);return this.cache};k.prototype.calc=function(t,n,r){var e;return this.queue.length?(this.cache||(this.cache=this.toArray()),e=this.cache,[t*e[0]+n*e[2]+(r?0:e[4]),t*e[1]+n*e[3]+(r?0:e[5])]):[t,n]};var C=k,at={matrix:!0,scale:!0,rotate:!0,translate:!0,skewX:!0,skewY:!0},it=/\s*(matrix|translate|scale|rotate|skewX|skewY)\s*\(\s*(.+?)\s*\)[\s,]*/,st=/[\s,]+/,ot=function(n){var r=new C,e,i;return n.split(it).forEach(function(s){if(!!s.length){if(typeof at[s]!="undefined"){e=s;return}i=s.split(st).map(function(a){return+a||0});switch(e){case"matrix":i.length===6&&r.matrix(i);return;case"scale":i.length===1?r.scale(i[0],i[0]):i.length===2&&r.scale(i[0],i[1]);return;case"rotate":i.length===1?r.rotate(i[0],0,0):i.length===3&&r.rotate(i[0],i[1],i[2]);return;case"translate":i.length===1?r.translate(i[0],0):i.length===2&&r.translate(i[0],i[1]);return;case"skewX":i.length===1&&r.skewX(i[0]);return;case"skewY":i.length===1&&r.skewY(i[0]);return}}}),r},E=Math.PI*2;function I(t,n,r,e){var i=t*e-n*r<0?-1:1,s=t*r+n*e;return s>1&&(s=1),s<-1&&(s=-1),i*Math.acos(s)}function ut(t,n,r,e,i,s,a,o,u,c){var h=c*(t-r)/2+u*(n-e)/2,f=-u*(t-r)/2+c*(n-e)/2,l=a*a,x=o*o,v=h*h,g=f*f,d=l*x-l*g-x*v;d<0&&(d=0),d/=l*g+x*v,d=Math.sqrt(d)*(i===s?-1:1);var w=d*a/o*f,A=d*-o/a*h,b=c*w-u*A+(t+r)/2,y=u*w+c*A+(n+e)/2,_=(h-w)/a,m=(f-A)/o,F=(-h-w)/a,P=(-f-A)/o,z=I(1,0,_,m),M=I(_,m,F,P);return s===0&&M>0&&(M-=E),s===1&&M<0&&(M+=E),[b,y,z,M]}function ct(t,n){var r=4/3*Math.tan(n/4),e=Math.cos(t),i=Math.sin(t),s=Math.cos(t+n),a=Math.sin(t+n);return[e,i,e-i*r,i+e*r,s+a*r,a-s*r,s,a]}var ht=function(n,r,e,i,s,a,o,u,c){var h=Math.sin(c*E/360),f=Math.cos(c*E/360),l=f*(n-e)/2+h*(r-i)/2,x=-h*(n-e)/2+f*(r-i)/2;if(l===0&&x===0)return[];if(o===0||u===0)return[];o=Math.abs(o),u=Math.abs(u);var v=l*l/(o*o)+x*x/(u*u);v>1&&(o*=Math.sqrt(v),u*=Math.sqrt(v));var g=ut(n,r,e,i,s,a,o,u,h,f),d=[],w=g[2],A=g[3],b=Math.max(Math.ceil(Math.abs(A)/(E/4)),1);A/=b;for(var y=0;y<b;y++)d.push(ct(w,A)),w+=A;return d.map(function(_){for(var m=0;m<_.length;m+=2){var F=_[m+0],P=_[m+1];F*=o,P*=u;var z=f*F-h*P,M=h*F+f*P;_[m+0]=z+g[0],_[m+1]=M+g[1]}return _})},L=1e-10,R=Math.PI/180;function N(t,n,r){if(!(this instanceof N))return new N(t,n,r);this.rx=t,this.ry=n,this.ax=r}N.prototype.transform=function(t){var n=Math.cos(this.ax*R),r=Math.sin(this.ax*R),e=[this.rx*(t[0]*n+t[2]*r),this.rx*(t[1]*n+t[3]*r),this.ry*(-t[0]*r+t[2]*n),this.ry*(-t[1]*r+t[3]*n)],i=e[0]*e[0]+e[2]*e[2],s=e[1]*e[1]+e[3]*e[3],a=((e[0]-e[3])*(e[0]-e[3])+(e[2]+e[1])*(e[2]+e[1]))*((e[0]+e[3])*(e[0]+e[3])+(e[2]-e[1])*(e[2]-e[1])),o=(i+s)/2;if(a<L*o)return this.rx=this.ry=Math.sqrt(o),this.ax=0,this;var u=e[0]*e[1]+e[2]*e[3];a=Math.sqrt(a);var c=o+a/2,h=o-a/2;return this.ax=Math.abs(u)<L&&Math.abs(c-s)<L?90:Math.atan(Math.abs(u)>Math.abs(c-s)?(c-i)/u:u/(c-s))*180/Math.PI,this.ax>=0?(this.rx=Math.sqrt(c),this.ry=Math.sqrt(h)):(this.ax+=90,this.rx=Math.sqrt(h),this.ry=Math.sqrt(c)),this};N.prototype.isDegenerate=function(){return this.rx<L*this.ry||this.ry<L*this.rx};var ft=N;function p(t){if(!(this instanceof p))return new p(t);var n=rt(t);this.segments=n.segments,this.err=n.err,this.__stack=[]}p.from=function(t){if(typeof t=="string")return new p(t);if(t instanceof p){var n=new p("");return n.err=t.err,n.segments=t.segments.map(function(r){return r.slice()}),n.__stack=t.__stack.map(function(r){return C().matrix(r.toArray())}),n}throw new Error("SvgPath.from: invalid param type "+t)};p.prototype.__matrix=function(t){var n=this,r;!t.queue.length||this.iterate(function(e,i,s,a){var o,u,c,h;switch(e[0]){case"v":o=t.calc(0,e[1],!0),u=o[0]===0?["v",o[1]]:["l",o[0],o[1]];break;case"V":o=t.calc(s,e[1],!1),u=o[0]===t.calc(s,a,!1)[0]?["V",o[1]]:["L",o[0],o[1]];break;case"h":o=t.calc(e[1],0,!0),u=o[1]===0?["h",o[0]]:["l",o[0],o[1]];break;case"H":o=t.calc(e[1],a,!1),u=o[1]===t.calc(s,a,!1)[1]?["H",o[0]]:["L",o[0],o[1]];break;case"a":case"A":var f=t.toArray(),l=ft(e[1],e[2],e[3]).transform(f);if(f[0]*f[3]-f[1]*f[2]<0&&(e[5]=e[5]?"0":"1"),o=t.calc(e[6],e[7],e[0]==="a"),e[0]==="A"&&e[6]===s&&e[7]===a||e[0]==="a"&&e[6]===0&&e[7]===0){u=[e[0]==="a"?"l":"L",o[0],o[1]];break}l.isDegenerate()?u=[e[0]==="a"?"l":"L",o[0],o[1]]:u=[e[0],l.rx,l.ry,l.ax,e[4],e[5],o[0],o[1]];break;case"m":h=i>0,o=t.calc(e[1],e[2],h),u=["m",o[0],o[1]];break;default:for(c=e[0],u=[c],h=c.toLowerCase()===c,r=1;r<e.length;r+=2)o=t.calc(e[r],e[r+1],h),u.push(o[0],o[1])}n.segments[i]=u},!0)};p.prototype.__evaluateStack=function(){var t,n;if(!!this.__stack.length){if(this.__stack.length===1){this.__matrix(this.__stack[0]),this.__stack=[];return}for(t=C(),n=this.__stack.length;--n>=0;)t.matrix(this.__stack[n].toArray());this.__matrix(t),this.__stack=[]}};p.prototype.toString=function(){var t=[],n,r;this.__evaluateStack();for(var e=0;e<this.segments.length;e++)r=this.segments[e][0],n=e>0&&r!=="m"&&r!=="M"&&r===this.segments[e-1][0],t=t.concat(n?this.segments[e].slice(1):this.segments[e]);return t.join(" ").replace(/ ?([achlmqrstvz]) ?/gi,"$1").replace(/ \-/g,"-").replace(/zm/g,"z m")};p.prototype.translate=function(t,n){return this.__stack.push(C().translate(t,n||0)),this};p.prototype.scale=function(t,n){return this.__stack.push(C().scale(t,!n&&n!==0?t:n)),this};p.prototype.rotate=function(t,n,r){return this.__stack.push(C().rotate(t,n||0,r||0)),this};p.prototype.skewX=function(t){return this.__stack.push(C().skewX(t)),this};p.prototype.skewY=function(t){return this.__stack.push(C().skewY(t)),this};p.prototype.matrix=function(t){return this.__stack.push(C().matrix(t)),this};p.prototype.transform=function(t){return t.trim()?(this.__stack.push(ot(t)),this):this};p.prototype.round=function(t){var n=0,r=0,e=0,i=0,s;return t=t||0,this.__evaluateStack(),this.segments.forEach(function(a){var o=a[0].toLowerCase()===a[0];switch(a[0]){case"H":case"h":o&&(a[1]+=e),e=a[1]-a[1].toFixed(t),a[1]=+a[1].toFixed(t);return;case"V":case"v":o&&(a[1]+=i),i=a[1]-a[1].toFixed(t),a[1]=+a[1].toFixed(t);return;case"Z":case"z":e=n,i=r;return;case"M":case"m":o&&(a[1]+=e,a[2]+=i),e=a[1]-a[1].toFixed(t),i=a[2]-a[2].toFixed(t),n=e,r=i,a[1]=+a[1].toFixed(t),a[2]=+a[2].toFixed(t);return;case"A":case"a":o&&(a[6]+=e,a[7]+=i),e=a[6]-a[6].toFixed(t),i=a[7]-a[7].toFixed(t),a[1]=+a[1].toFixed(t),a[2]=+a[2].toFixed(t),a[3]=+a[3].toFixed(t+2),a[6]=+a[6].toFixed(t),a[7]=+a[7].toFixed(t);return;default:s=a.length,o&&(a[s-2]+=e,a[s-1]+=i),e=a[s-2]-a[s-2].toFixed(t),i=a[s-1]-a[s-1].toFixed(t),a.forEach(function(u,c){!c||(a[c]=+a[c].toFixed(t))});return}}),this};p.prototype.iterate=function(t,n){var r=this.segments,e={},i=!1,s=0,a=0,o=0,u=0,c,h,f;if(n||this.__evaluateStack(),r.forEach(function(l,x){var v=t(l,x,s,a);Array.isArray(v)&&(e[x]=v,i=!0);var g=l[0]===l[0].toLowerCase();switch(l[0]){case"m":case"M":s=l[1]+(g?s:0),a=l[2]+(g?a:0),o=s,u=a;return;case"h":case"H":s=l[1]+(g?s:0);return;case"v":case"V":a=l[1]+(g?a:0);return;case"z":case"Z":s=o,a=u;return;default:s=l[l.length-2]+(g?s:0),a=l[l.length-1]+(g?a:0)}}),!i)return this;for(f=[],c=0;c<r.length;c++)if(typeof e[c]!="undefined")for(h=0;h<e[c].length;h++)f.push(e[c][h]);else f.push(r[c]);return this.segments=f,this};p.prototype.abs=function(){return this.iterate(function(t,n,r,e){var i=t[0],s=i.toUpperCase(),a;if(i!==s){t[0]=s;switch(i){case"v":t[1]+=e;return;case"a":t[6]+=r,t[7]+=e;return;default:for(a=1;a<t.length;a++)t[a]+=a%2?r:e}}},!0),this};p.prototype.rel=function(){return this.iterate(function(t,n,r,e){var i=t[0],s=i.toLowerCase(),a;if(i!==s&&!(n===0&&i==="M")){t[0]=s;switch(i){case"V":t[1]-=e;return;case"A":t[6]-=r,t[7]-=e;return;default:for(a=1;a<t.length;a++)t[a]-=a%2?r:e}}},!0),this};p.prototype.unarc=function(){return this.iterate(function(t,n,r,e){var i,s,a,o=[],u=t[0];return u!=="A"&&u!=="a"?null:(u==="a"?(s=r+t[6],a=e+t[7]):(s=t[6],a=t[7]),i=ht(r,e,s,a,t[4],t[5],t[1],t[2],t[3]),i.length===0?[[t[0]==="a"?"l":"L",t[6],t[7]]]:(i.forEach(function(c){o.push(["C",c[2],c[3],c[4],c[5],c[6],c[7]])}),o))}),this};p.prototype.unshort=function(){var t=this.segments,n,r,e,i,s;return this.iterate(function(a,o,u,c){var h=a[0],f=h.toUpperCase(),l;!o||(f==="T"?(l=h==="t",e=t[o-1],e[0]==="Q"?(n=e[1]-u,r=e[2]-c):e[0]==="q"?(n=e[1]-e[3],r=e[2]-e[4]):(n=0,r=0),i=-n,s=-r,l||(i+=u,s+=c),t[o]=[l?"q":"Q",i,s,a[1],a[2]]):f==="S"&&(l=h==="s",e=t[o-1],e[0]==="C"?(n=e[3]-u,r=e[4]-c):e[0]==="c"?(n=e[3]-e[5],r=e[4]-e[6]):(n=0,r=0),i=-n,s=-r,l||(i+=u,s+=c),t[o]=[l?"c":"C",i,s,a[1],a[2],a[3],a[4]]))}),this};var lt=p,pt=lt,T=pt,vt="http://www.w3.org/2000/svg";function S(t,n){let r=n||t.nodeName,e=document.createElementNS(vt,r),i=t.getAttribute("stroke");i&&e.setAttribute("stroke",i);let s=t.getAttribute("fill");s&&e.setAttribute("fill",s);let a=t.getAttribute("stroke-width");a&&e.setAttribute("stroke-width",a);let o=t.getAttribute("id");o&&e.setAttribute("id",o);let u=t.getAttribute("transform");if(u&&e.setAttribute("transform",u),r==="svg"){let c=t.getAttribute("width");c&&e.setAttribute("width",c);let h=t.getAttribute("height");h&&e.setAttribute("height",h);let f=t.getAttribute("viewBox");f&&e.setAttribute("viewBox",f)}return e}function V(t,n,r,e){return"M"+(t-r)+","+n+"a"+r+","+e+" 0 1,0 "+r*2+",0a"+r+","+e+" 0 1,0 "+r*-2+",0"}function Y(t){for(var n="",r=0;r<t.length;r+=2){var e=n.length?" ":"M";n+=e+t[r]+","+t[r+1]}return n}function W(t){let n=S(t);return Array.from(t.children).forEach(function(r){n.appendChild(U(r))}),n}function gt(t){let n=t.getAttribute("cx")||0,r=t.getAttribute("cy")||0,e=t.getAttribute("r"),i=V(n,r,e,e),s=S(t,"path");return s.setAttribute("d",i),s}function xt(t){let n=t.getAttribute("cx")||0,r=t.getAttribute("cy")||0,e=t.getAttribute("rx"),i=t.getAttribute("ry"),s=V(n,r,e,i),a=S(t,"path");return a.setAttribute("d",s),a}function dt(t){let n=t.getAttribute("x1"),r=t.getAttribute("y1"),e=t.getAttribute("x2"),i=t.getAttribute("y2"),s=Y([n,r,e,i]),a=S(t,"path");return a.setAttribute("d",s),a}function At(t){let n=t.getAttribute("points").trim().split(/[\s,]+/),r=Y(n)+"z",e=S(t,"path");return e.setAttribute("d",r),e}function bt(t){let n=t.getAttribute("points").trim().split(/[\s,]+/),r=Y(n),e=S(t,"path");return e.setAttribute("d",r),e}function wt(t){let n=parseFloat(t.getAttribute("x")||0),r=parseFloat(t.getAttribute("y")||0),e=parseFloat(t.getAttribute("width")),i=parseFloat(t.getAttribute("height")),s=[];s.push(n,r),s.push(n+e,r),s.push(n+e,r+i),s.push(n,r+i);let a=Y(s)+"z",o=S(t,"path");return o.setAttribute("d",a),o}function U(t){return t.nodeName==="svg"?W(t):t.nodeName==="circle"?gt(t):t.nodeName==="ellipse"?xt(t):t.nodeName==="line"?dt(t):t.nodeName==="polygon"?At(t):t.nodeName==="polyline"?bt(t):t.nodeName==="rect"?wt(t):t.nodeName==="g"?W(t):t.nodeName==="path"?t.cloneNode(!0):t}var j=U;function H(t,n={consolidate:!0,round:7}){let{consolidate:r=!0,round:e=7}=n,i=j(t),s=i.getAttribute("viewBox"),a=i.cloneNode(!0);a.removeAttribute("viewBox"),document.body.append(a);let o=Array.from(a.querySelectorAll("path")).map(h=>{let{fill:f,stroke:l,strokeWidth:x}=window.getComputedStyle(h),v=h.getAttribute("d"),{a:g,b:d,c:w,d:A,e:b,f:y}=h.getCTM(),_=T(v).abs().matrix([g,d,w,A,b,y]).round(e).toString();return{fill:f,stroke:l,strokeWidth:x,d:_}});a.parentNode&&a.parentNode.removeChild(a);let u=r?o.reduce((h,f,l,x)=>{let{fill:v,stroke:g,strokeWidth:d,d:w}=f,A=h.find(b=>b.fill===f.fill&&b.stroke===f.stroke&&b.strokeWidth===f.strokeWidth);if(A)A.d+=" "+f.d;else{let b={fill:v,stroke:g,strokeWidth:d,d:w};h.push(b)}return h},[]):o,c=t.cloneNode(!1);return u.forEach(({fill:h,stroke:f,strokeWidth:l,d:x})=>{let v=document.createElementNS("http://www.w3.org/2000/svg","path");v.setAttribute("stroke",f),v.setAttribute("fill",h),v.setAttribute("stroke-width",l),v.setAttribute("d",x),c.appendChild(v)}),c}export{H as default};
